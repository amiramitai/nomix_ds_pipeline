pipeline:
  name: AudioEncoderPipeline
  remotes:
    - name: minizero
      host: minizero.local
      port: 8000

  # profiler:
  #   host: '127.0.0.1'
  #   prefix: 'nomix_ds.'
  stages:
    - name: Dataset
      type: DualDatasetStage
      params:
        vocl_filename: /Users/amiramitai/Projects/nomix/ds_vocls.linux
        inst_filename: /Users/amiramitai/Projects/nomix/ds_vocls.linux
        base_dir: /Volumes/t$/datasets/nomix_ds
      remotes:
        - name: minizero
    - name: AudioToImage
      type: AudioToImageStage
      remotes:
        - name: minizero
      # cache: 
      #   filename: ../cache/AudioToImage
      #   seek_policy: ONE_SHOT
      #   max_size: 2147483648
      #   max_split: 50
    - name: ImageToEncoding
      type: ImageToEncodingStage
      params:
        weights: ../vgg16_weights.npz
      # cache: 
      #   filename: ../cache/ImageToEncoding
      #   seek_policy: ONE_SHOT
      drop: true
      
        # max_size: 2147483648
        # max_split: 50